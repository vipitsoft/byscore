@{
    Layout = "_Layout1";
    ViewData["Title"] = "添加产品";
}
<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            General Form Elements
            <small>Preview</small>
        </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
            <li><a href="#">Forms</a></li>
            <li class="active">General Elements</li>
        </ol>
    </section>

    <!-- Main content -->
    <section class="content">
        <div class="row">
            <!-- left column -->
            <div class="col-md-12">
                <!-- general form elements -->
                <div class="box box-primary">
                    <div class="box-header with-border">
                        <h3 class="box-title">添加产品</h3>
                    </div>
                    <!-- /.box-header -->
                    <!-- form start -->
                    <form role="form" id="productAdd">
                        <div class="box-body">
                            <div class="form-group">
                                <label for="Name">产品名称</label>
                                <input type="text" class="form-control" name="Name" id="Name" placeholder="产品名称">
                            </div>
                            <div class="form-group">
                                <label for="Price">价格</label>
                                <input type="text" class="form-control" name="Price" id="Price" placeholder="价格">
                            </div>
                            <div class="form-group">
                                <label for="Discout">折扣</label>
                                <input type="text" class="form-control" name="Discout" id="Discout" placeholder="折扣">
                            </div>
                            <div class="form-group">
                                <label for="Description">产品介绍</label>
                                <textarea class="form-control" name="Description" id="Description" placeholder="产品介绍"></textarea>
                            </div>
                        </div>


                        <!-- /.box-body -->

                        <div class="box-footer">
                            <button type="submit" class="btn btn-primary" id="AddProduct">提交</button>
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            <a href="/home/productlist" class="btn btn-default">取消</a>
                        </div>
                    </form>
                </div>
                <!-- /.box -->

            </div>
            <!--/.col (left) -->

        </div>
        <!-- /.row -->
    </section>
    <!-- /.content -->
</div>
<!-- /.content-wrapper -->

@section Scripts{
    <script src="~/lib/bootstrap-validator/dist/js/bootstrapValidator.min.js"></script>
    <script src="~/lib/bootstrap-validator/dist/js/language/zh_CN.js"></script>
    <link href="~/lib/bootstrap-validator/dist/css/bootstrapValidator.min.css" rel="stylesheet" />
    <script src="~/lib/jquery/dist/jquery.form.js"></script>
    <link href="~/lib/toastr/toastr.css" rel="stylesheet" />
    <script src="~/lib/toastr/toastr.min.js"></script>
    <script src="~/js/toastrconfig.js"></script>
    <script>
         $(function () {
        $('form').bootstrapValidator({
　　　　　　　　message: 'This value is not valid',
            　feedbackIcons: {
                　　　　　　　　valid: 'glyphicon glyphicon-ok',
                　　　　　　　　invalid: 'glyphicon glyphicon-remove',
                　　　　　　　　validating: 'glyphicon glyphicon-refresh'
            　　　　　　　　   },
            fields: {
                Name: {
                    message: '产品名验证失败！',
                    validators: {
                        notEmpty: {
                            message: '产品名不能为空！'
                        }
                    }
                },
                Price: {
                    validators: {
                        notEmpty: {
                            message: '产品价格不能为空！'
                        }
                    }
                },
                Discout: {
                    validators: {
                        notEmpty: {
                            message: '产品折扣不能为空！'
                        }
                    }
                },
                Description: {
                    validators: {
                        notEmpty: {
                            message: '产品介绍不能为空！'
                        }
                    }
                }
            }
        });
        $("#AddProduct").on("click", function(){
        var opt = {
                type: "POST",
                dataType: "json",
                url: "/home/ProductAdd",
                success: function (data) {
                    if (data.isadd == true) {
                        toastr.success("数据提交成功！");
                        setTimeout(function(){ window.location.reload(); }, 3000);
                    }
                    else
                    {
                        toastr.error("提交失败！");
                        $("#AddProduct").removeAttr("disabled");
                    }
                },
                error: function(data) {
                        toastr.error(XMLResponse.responseText);
                        $("#AddProduct").removeAttr("disabled");
                     }
                };
             $("#productAdd").ajaxForm(opt);
        })



    });
    </script>
}